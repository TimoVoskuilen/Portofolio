<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="5 Relational databases | _main.knit" />
<meta property="og:type" content="book" />







<meta name="description" content="5 Relational databases | _main.knit">

<title>5 Relational databases | _main.knit</title>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="libs/navigation-1.1/tabsets.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



<link rel="stylesheet" href="style.css" type="text/css" />

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
/* show arrow before summary tag as in bootstrap
TODO: remove if boostrap in updated in html_document (rmarkdown#1485) */
details > summary {
  display: list-item;
  cursor: pointer;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li><a href="1-c.elegans-experiment.html#c.elegans-experiment"><span class="toc-section-number">1</span> C.elegans experiment</a></li>
<li><a href="2-guerilla-analytics.html#guerilla-analytics"><span class="toc-section-number">2</span> Guerilla analytics</a></li>
<li><a href="3-cv.html#cv"><span class="toc-section-number">3</span> CV</a></li>
<li><a href="4-looking-ahead.html#looking-ahead"><span class="toc-section-number">4</span> Looking ahead</a></li>
<li><a href="5-relational-databases.html#relational-databases"><span class="toc-section-number">5</span> Relational databases</a></li>
<li><a href="6-introduction.html#introduction"><span class="toc-section-number">6</span> Introduction</a></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="relational-databases" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Relational databases</h1>
<body id = "start">
<div class="sidenav">
<a href='index.html#Introduction'>Introduction</a>
<a href='1-c.elegans-experiment#data-visualisation'>Data visualisation</a>
<a href='open_peer_review.html#open peer review'>Peer review</a>
<a href='3-cv#CV'>CV</a>
<a href='4-looking-ahead#Looking ahead'>Looking ahead</a>
<a href='5-relational-databases#relational databases'>relational databases</a>
</div>
<p><strong>Intro</strong></p>
<p>This page is about datasets on flu and dengue occurrences between 2002 and 2015 as measured by Google Webservices “Google Flu Trends” and “Google Dengue Trends”. These webservices track searches of the words flu and dengue in different countries and match them to occurrences of the diseases in these countries. The data will be compared to the “gapminder” dataset that is part of the R package dslabs.
<br> <br>
Data Source: <br>
(Google sites are unfortunately no longer operational) <br>
- Google Flu Trends (<a href="http://www.google.org/flutrends" class="uri">http://www.google.org/flutrends</a>) <br>
- Google Dengue Trends (<a href="http://www.google.org/denguetrends" class="uri">http://www.google.org/denguetrends</a>) <br>
- <a href="https://www.rdocumentation.org/packages/dslabs/versions/0.7.4">dslabs package</a>
<br> <br>
Datasets used: <br>
- <a href="./data/data_raw/005_relational_databases/flu_data.csv">Flu data</a> <br>
- <a href="./data/data_raw/005_relational_databases/dengue_data.csv">Dengue data</a> <br>
- <a href="./data/data_raw/005_relational_databases/gapminder.csv">gapminder</a>
<br></p>
<p><strong>Cleaning up</strong></p>
<p>Before any comparisons can be made the data must be tidied and the column types must be matching. <br>
The gapminder dataset is also very large and includes a large number of years not present in the flu and dengue datasets. These years also need to be removed from the dataset. <br>
The next section will show how this was achieved:
<br></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="5-relational-databases.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the datasets into R datframes</span></span>
<span id="cb11-2"><a href="5-relational-databases.html#cb11-2" aria-hidden="true" tabindex="-1"></a>flu_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&#39;data_Raw/007_relational_databases/flu_data.csv&#39;</span>, <span class="at">skip =</span> <span class="dv">11</span>) <span class="sc">%&gt;%</span> <span class="fu">as_tibble</span>()</span>
<span id="cb11-3"><a href="5-relational-databases.html#cb11-3" aria-hidden="true" tabindex="-1"></a>dengue_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data_Raw/007_relational_databases/dengue_data.csv&quot;</span>, <span class="at">skip =</span> <span class="dv">11</span>) <span class="sc">%&gt;%</span> <span class="fu">as_tibble</span>()</span>
<span id="cb11-4"><a href="5-relational-databases.html#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="5-relational-databases.html#cb11-5" aria-hidden="true" tabindex="-1"></a>gapminder <span class="ot">&lt;-</span> dslabs<span class="sc">::</span>gapminder <span class="sc">%&gt;%</span> <span class="fu">as_tibble</span>()</span>
<span id="cb11-6"><a href="5-relational-databases.html#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Tidy the flu_data and dengue_data datasets</span></span>
<span id="cb11-7"><a href="5-relational-databases.html#cb11-7" aria-hidden="true" tabindex="-1"></a>flu_data <span class="ot">&lt;-</span> flu_data <span class="sc">%&gt;%</span> </span>
<span id="cb11-8"><a href="5-relational-databases.html#cb11-8" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">cols =</span> Argentina<span class="sc">:</span>Uruguay,</span>
<span id="cb11-9"><a href="5-relational-databases.html#cb11-9" aria-hidden="true" tabindex="-1"></a>                      <span class="at">names_to =</span> <span class="st">&quot;country&quot;</span>, </span>
<span id="cb11-10"><a href="5-relational-databases.html#cb11-10" aria-hidden="true" tabindex="-1"></a>                      <span class="at">values_to =</span> <span class="st">&quot;searches&quot;</span></span>
<span id="cb11-11"><a href="5-relational-databases.html#cb11-11" aria-hidden="true" tabindex="-1"></a>                      )</span>
<span id="cb11-12"><a href="5-relational-databases.html#cb11-12" aria-hidden="true" tabindex="-1"></a>dengue_data <span class="ot">&lt;-</span> dengue_data <span class="sc">%&gt;%</span> </span>
<span id="cb11-13"><a href="5-relational-databases.html#cb11-13" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">cols =</span> Argentina<span class="sc">:</span>Venezuela,</span>
<span id="cb11-14"><a href="5-relational-databases.html#cb11-14" aria-hidden="true" tabindex="-1"></a>                      <span class="at">names_to =</span> <span class="st">&quot;country&quot;</span>, </span>
<span id="cb11-15"><a href="5-relational-databases.html#cb11-15" aria-hidden="true" tabindex="-1"></a>                      <span class="at">values_to =</span> <span class="st">&quot;searches&quot;</span></span>
<span id="cb11-16"><a href="5-relational-databases.html#cb11-16" aria-hidden="true" tabindex="-1"></a>                      )</span>
<span id="cb11-17"><a href="5-relational-databases.html#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Match the column types of the datasets</span></span>
<span id="cb11-18"><a href="5-relational-databases.html#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="co">#flu_data &lt;- coltrans(flu_data)</span></span>
<span id="cb11-19"><a href="5-relational-databases.html#cb11-19" aria-hidden="true" tabindex="-1"></a><span class="co">#dengue_data &lt;- coltrans(dengue_data)</span></span>
<span id="cb11-20"><a href="5-relational-databases.html#cb11-20" aria-hidden="true" tabindex="-1"></a>gapminder <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb11-21"><a href="5-relational-databases.html#cb11-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transform</span>(<span class="at">year =</span> <span class="fu">as.character</span>(year))</span>
<span id="cb11-22"><a href="5-relational-databases.html#cb11-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter gapminder to contain only the years present in the flu and dengue dataseets</span></span>
<span id="cb11-23"><a href="5-relational-databases.html#cb11-23" aria-hidden="true" tabindex="-1"></a>gapminder <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb11-24"><a href="5-relational-databases.html#cb11-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">2002</span><span class="sc">:</span><span class="dv">2015</span>)</span>
<span id="cb11-25"><a href="5-relational-databases.html#cb11-25" aria-hidden="true" tabindex="-1"></a>         )</span></code></pre></div>
<p><strong>Using DBeaver SQL</strong></p>
<p>Following the cleaning of the data, the datasets need to be saved in R and uploaded to DBeaver for further review using the following commands:
<br></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="5-relational-databases.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Save the data in .csv and .rds files</span></span>
<span id="cb12-2"><a href="5-relational-databases.html#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(flu_data, <span class="st">&quot;data_Raw/007_relational_databases/flu_data_tidy.csv&quot;</span>)</span>
<span id="cb12-3"><a href="5-relational-databases.html#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(dengue_data, <span class="st">&quot;data_Raw/007_relational_databases/dengue_data_tidy.csv&quot;</span>)</span>
<span id="cb12-4"><a href="5-relational-databases.html#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(gapminder, <span class="st">&quot;data_Raw/007_relational_databases/gapminder.csv&quot;</span>)</span>
<span id="cb12-5"><a href="5-relational-databases.html#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(flu_data, <span class="st">&quot;data_Raw/007_relational_databases/flu_data_tidy.rds&quot;</span>)</span>
<span id="cb12-6"><a href="5-relational-databases.html#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(dengue_data, <span class="st">&quot;data_Raw/007_relational_databases/dengue_data_tidy.rds&quot;</span>)</span>
<span id="cb12-7"><a href="5-relational-databases.html#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="fu">write_rds</span>(gapminder, <span class="st">&quot;data_Raw/007_relational_databases/gapminder.rds&quot;</span>)</span>
<span id="cb12-8"><a href="5-relational-databases.html#cb12-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-9"><a href="5-relational-databases.html#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Upload the data to DBeaver</span></span>
<span id="cb12-10"><a href="5-relational-databases.html#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;flu_data&quot;</span>,</span>
<span id="cb12-11"><a href="5-relational-databases.html#cb12-11" aria-hidden="true" tabindex="-1"></a>             flu_data,</span>
<span id="cb12-12"><a href="5-relational-databases.html#cb12-12" aria-hidden="true" tabindex="-1"></a>             <span class="at">overwrite =</span> <span class="cn">TRUE</span></span>
<span id="cb12-13"><a href="5-relational-databases.html#cb12-13" aria-hidden="true" tabindex="-1"></a>              )</span>
<span id="cb12-14"><a href="5-relational-databases.html#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;dengue_data&quot;</span>,</span>
<span id="cb12-15"><a href="5-relational-databases.html#cb12-15" aria-hidden="true" tabindex="-1"></a>             dengue_data,</span>
<span id="cb12-16"><a href="5-relational-databases.html#cb12-16" aria-hidden="true" tabindex="-1"></a>             <span class="at">overwrite =</span> <span class="cn">TRUE</span></span>
<span id="cb12-17"><a href="5-relational-databases.html#cb12-17" aria-hidden="true" tabindex="-1"></a>              )</span>
<span id="cb12-18"><a href="5-relational-databases.html#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;gapminder&quot;</span>,</span>
<span id="cb12-19"><a href="5-relational-databases.html#cb12-19" aria-hidden="true" tabindex="-1"></a>             gapminder,</span>
<span id="cb12-20"><a href="5-relational-databases.html#cb12-20" aria-hidden="true" tabindex="-1"></a>             <span class="at">overwrite =</span> <span class="cn">TRUE</span></span>
<span id="cb12-21"><a href="5-relational-databases.html#cb12-21" aria-hidden="true" tabindex="-1"></a>              )</span></code></pre></div>
<p>Uploading files into DBeaver and using the SQL shell to obtain some information about the data
<img src="images/007_relational_databasesSQL.png" style="width:100.0%" alt="SQshell" />
and using the console to get information from the data:
<img src="images/007_relational_databasesdBEAVER.png" style="width:100.0%" alt="DBeaverexample" /></p>
<p><strong>Joining the data</strong></p>
<p>Getting information from tables and forming them into something useful for visualizing data can also be done using R.
The Data needs to be joined together to make good informative figures. The next section shows how this was done followed by a preview of the newly formed table.</p>
<p><br></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="5-relational-databases.html#cb13-1" aria-hidden="true" tabindex="-1"></a>flu_data<span class="sc">$</span>Date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(flu_data<span class="sc">$</span>Date)</span>
<span id="cb13-2"><a href="5-relational-databases.html#cb13-2" aria-hidden="true" tabindex="-1"></a>dengue_data<span class="sc">$</span>Date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(dengue_data<span class="sc">$</span>Date)</span>
<span id="cb13-3"><a href="5-relational-databases.html#cb13-3" aria-hidden="true" tabindex="-1"></a>flu_data<span class="sc">$</span>Date <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">format</span>(flu_data<span class="sc">$</span>Date, <span class="st">&quot;%Y&quot;</span>))</span>
<span id="cb13-4"><a href="5-relational-databases.html#cb13-4" aria-hidden="true" tabindex="-1"></a>dengue_data<span class="sc">$</span>Date <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">format</span>(dengue_data<span class="sc">$</span>Date, <span class="st">&quot;%Y&quot;</span>))</span>
<span id="cb13-5"><a href="5-relational-databases.html#cb13-5" aria-hidden="true" tabindex="-1"></a>flu_data <span class="ot">&lt;-</span> flu_data <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">year =</span> <span class="st">&quot;Date&quot;</span>)</span>
<span id="cb13-6"><a href="5-relational-databases.html#cb13-6" aria-hidden="true" tabindex="-1"></a>dengue_data <span class="ot">&lt;-</span> dengue_data <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">year =</span> <span class="st">&quot;Date&quot;</span>)</span>
<span id="cb13-7"><a href="5-relational-databases.html#cb13-7" aria-hidden="true" tabindex="-1"></a>flu_data<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">as.character</span>(flu_data<span class="sc">$</span>year)</span>
<span id="cb13-8"><a href="5-relational-databases.html#cb13-8" aria-hidden="true" tabindex="-1"></a>dengue_data<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">as.character</span>(dengue_data<span class="sc">$</span>year)</span>
<span id="cb13-9"><a href="5-relational-databases.html#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Join the data tables</span></span>
<span id="cb13-10"><a href="5-relational-databases.html#cb13-10" aria-hidden="true" tabindex="-1"></a>flu_dengue_data <span class="ot">&lt;-</span> <span class="fu">full_join</span>(flu_data, </span>
<span id="cb13-11"><a href="5-relational-databases.html#cb13-11" aria-hidden="true" tabindex="-1"></a>                             dengue_data, </span>
<span id="cb13-12"><a href="5-relational-databases.html#cb13-12" aria-hidden="true" tabindex="-1"></a>                             <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;year&quot;</span>), </span>
<span id="cb13-13"><a href="5-relational-databases.html#cb13-13" aria-hidden="true" tabindex="-1"></a>                             <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">&quot;_flu&quot;</span>, <span class="st">&quot;_dengue&quot;</span>)</span>
<span id="cb13-14"><a href="5-relational-databases.html#cb13-14" aria-hidden="true" tabindex="-1"></a>                             )</span>
<span id="cb13-15"><a href="5-relational-databases.html#cb13-15" aria-hidden="true" tabindex="-1"></a>gap_flu_dengue_data <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(flu_dengue_data, </span>
<span id="cb13-16"><a href="5-relational-databases.html#cb13-16" aria-hidden="true" tabindex="-1"></a>                                 gapminder, </span>
<span id="cb13-17"><a href="5-relational-databases.html#cb13-17" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;year&quot;</span>)</span>
<span id="cb13-18"><a href="5-relational-databases.html#cb13-18" aria-hidden="true" tabindex="-1"></a>                                 )</span>
<span id="cb13-19"><a href="5-relational-databases.html#cb13-19" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(gap_flu_dengue_data <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">5</span>))</span></code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="3%" />
<col width="6%" />
<col width="8%" />
<col width="10%" />
<col width="11%" />
<col width="10%" />
<col width="6%" />
<col width="7%" />
<col width="8%" />
<col width="6%" />
<col width="17%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">year</th>
<th align="left">country</th>
<th align="right">searches_flu</th>
<th align="right">searches_dengue</th>
<th align="right">infant_mortality</th>
<th align="right">life_expectancy</th>
<th align="right">fertility</th>
<th align="right">population</th>
<th align="right">gdp</th>
<th align="left">continent</th>
<th align="left">region</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2002</td>
<td align="left">Argentina</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">17.1</td>
<td align="right">74.3</td>
<td align="right">2.38</td>
<td align="right">37889443</td>
<td align="right">242076212334</td>
<td align="left">Americas</td>
<td align="left">South America</td>
</tr>
<tr class="even">
<td align="left">2002</td>
<td align="left">Australia</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">5.0</td>
<td align="right">80.3</td>
<td align="right">1.76</td>
<td align="right">19514385</td>
<td align="right">442135393399</td>
<td align="left">Oceania</td>
<td align="left">Australia and New Zealand</td>
</tr>
<tr class="odd">
<td align="left">2002</td>
<td align="left">Austria</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">4.4</td>
<td align="right">78.8</td>
<td align="right">1.39</td>
<td align="right">8114698</td>
<td align="right">196998621885</td>
<td align="left">Europe</td>
<td align="left">Western Europe</td>
</tr>
<tr class="even">
<td align="left">2002</td>
<td align="left">Belgium</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">4.4</td>
<td align="right">78.2</td>
<td align="right">1.68</td>
<td align="right">10364613</td>
<td align="right">237741668285</td>
<td align="left">Europe</td>
<td align="left">Western Europe</td>
</tr>
<tr class="odd">
<td align="left">2002</td>
<td align="left">Bolivia</td>
<td align="right">NA</td>
<td align="right">0.101</td>
<td align="right">53.7</td>
<td align="right">68.7</td>
<td align="right">3.98</td>
<td align="right">8653343</td>
<td align="right">8751510220</td>
<td align="left">Americas</td>
<td align="left">South America</td>
</tr>
</tbody>
</table>
<p><strong>Visualising the data</strong></p>
<p>After the data is joined together in one table it can be udes to create some figures:
<br> <br>
First by plotting the occurrences of flu and dengue per region to see if they are more common in one region compared to the other.
<br></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="5-relational-databases.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot occurrences of flu and dengue per region</span></span>
<span id="cb14-2"><a href="5-relational-databases.html#cb14-2" aria-hidden="true" tabindex="-1"></a>flu_region <span class="ot">&lt;-</span> gap_flu_dengue_data <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb14-3"><a href="5-relational-databases.html#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> region, </span>
<span id="cb14-4"><a href="5-relational-databases.html#cb14-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">y =</span> searches_flu,</span>
<span id="cb14-5"><a href="5-relational-databases.html#cb14-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill =</span> region)</span>
<span id="cb14-6"><a href="5-relational-databases.html#cb14-6" aria-hidden="true" tabindex="-1"></a>           ) <span class="sc">+</span></span>
<span id="cb14-7"><a href="5-relational-databases.html#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb14-8"><a href="5-relational-databases.html#cb14-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb14-9"><a href="5-relational-databases.html#cb14-9" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">+</span> </span>
<span id="cb14-10"><a href="5-relational-databases.html#cb14-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Flu searches per region&quot;</span>, </span>
<span id="cb14-11"><a href="5-relational-databases.html#cb14-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Searches of the word &#39;Flu&#39; per region&quot;</span>,</span>
<span id="cb14-12"><a href="5-relational-databases.html#cb14-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb14-13"><a href="5-relational-databases.html#cb14-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Searches&quot;</span></span>
<span id="cb14-14"><a href="5-relational-databases.html#cb14-14" aria-hidden="true" tabindex="-1"></a>       )</span>
<span id="cb14-15"><a href="5-relational-databases.html#cb14-15" aria-hidden="true" tabindex="-1"></a>dengue_region <span class="ot">&lt;-</span> gap_flu_dengue_data <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb14-16"><a href="5-relational-databases.html#cb14-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> region, </span>
<span id="cb14-17"><a href="5-relational-databases.html#cb14-17" aria-hidden="true" tabindex="-1"></a>               <span class="at">y =</span> searches_dengue,</span>
<span id="cb14-18"><a href="5-relational-databases.html#cb14-18" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill =</span> region)</span>
<span id="cb14-19"><a href="5-relational-databases.html#cb14-19" aria-hidden="true" tabindex="-1"></a>           ) <span class="sc">+</span></span>
<span id="cb14-20"><a href="5-relational-databases.html#cb14-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb14-21"><a href="5-relational-databases.html#cb14-21" aria-hidden="true" tabindex="-1"></a>          <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb14-22"><a href="5-relational-databases.html#cb14-22" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">+</span> </span>
<span id="cb14-23"><a href="5-relational-databases.html#cb14-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Dengue searches per region&quot;</span>, </span>
<span id="cb14-24"><a href="5-relational-databases.html#cb14-24" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Searches of the word &#39;Dengue&#39; per region&quot;</span>,</span>
<span id="cb14-25"><a href="5-relational-databases.html#cb14-25" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb14-26"><a href="5-relational-databases.html#cb14-26" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Searches&quot;</span></span>
<span id="cb14-27"><a href="5-relational-databases.html#cb14-27" aria-hidden="true" tabindex="-1"></a>       )</span>
<span id="cb14-28"><a href="5-relational-databases.html#cb14-28" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(flu_region, dengue_region, <span class="at">nrow =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/data%20visualisation%201-1.png" width="672" />
<br>
The data shows that dengue is most common in South America and South-Eastern Asia. It also has some presence in Central America and Southern Asia but not so much in other regions.
<br>
Flu appears to be most common in Eastern Europe, Western Europe and Northern America. Regions where it’s not very common are North- and Southern Europe and South America
<br> <br>
The second graph will portray the occurrences of flu and dengue in the Netherlands over the period of 2002 to 2015.
<br></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="5-relational-databases.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot occurrences of flu and dengue in the Netherlands by year</span></span>
<span id="cb15-2"><a href="5-relational-databases.html#cb15-2" aria-hidden="true" tabindex="-1"></a>flu_region <span class="ot">&lt;-</span> gap_flu_dengue_data <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="5-relational-databases.html#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;Netherlands&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb15-4"><a href="5-relational-databases.html#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb15-5"><a href="5-relational-databases.html#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, </span>
<span id="cb15-6"><a href="5-relational-databases.html#cb15-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">y =</span> searches_flu,</span>
<span id="cb15-7"><a href="5-relational-databases.html#cb15-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill =</span> year)</span>
<span id="cb15-8"><a href="5-relational-databases.html#cb15-8" aria-hidden="true" tabindex="-1"></a>           ) <span class="sc">+</span></span>
<span id="cb15-9"><a href="5-relational-databases.html#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb15-10"><a href="5-relational-databases.html#cb15-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb15-11"><a href="5-relational-databases.html#cb15-11" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">+</span> </span>
<span id="cb15-12"><a href="5-relational-databases.html#cb15-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Flu searches in the Netherlands&quot;</span>, </span>
<span id="cb15-13"><a href="5-relational-databases.html#cb15-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Searches of the word &#39;Flu&#39; in the Netherlands&quot;</span>,</span>
<span id="cb15-14"><a href="5-relational-databases.html#cb15-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Year&quot;</span>,</span>
<span id="cb15-15"><a href="5-relational-databases.html#cb15-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Searches&quot;</span></span>
<span id="cb15-16"><a href="5-relational-databases.html#cb15-16" aria-hidden="true" tabindex="-1"></a>       )</span>
<span id="cb15-17"><a href="5-relational-databases.html#cb15-17" aria-hidden="true" tabindex="-1"></a>dengue_region <span class="ot">&lt;-</span> gap_flu_dengue_data <span class="sc">%&gt;%</span> </span>
<span id="cb15-18"><a href="5-relational-databases.html#cb15-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;Netherlands&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-19"><a href="5-relational-databases.html#cb15-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb15-20"><a href="5-relational-databases.html#cb15-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, </span>
<span id="cb15-21"><a href="5-relational-databases.html#cb15-21" aria-hidden="true" tabindex="-1"></a>               <span class="at">y =</span> searches_dengue,</span>
<span id="cb15-22"><a href="5-relational-databases.html#cb15-22" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill =</span> year)</span>
<span id="cb15-23"><a href="5-relational-databases.html#cb15-23" aria-hidden="true" tabindex="-1"></a>           ) <span class="sc">+</span></span>
<span id="cb15-24"><a href="5-relational-databases.html#cb15-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb15-25"><a href="5-relational-databases.html#cb15-25" aria-hidden="true" tabindex="-1"></a>          <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb15-26"><a href="5-relational-databases.html#cb15-26" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">+</span> </span>
<span id="cb15-27"><a href="5-relational-databases.html#cb15-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Dengue searches in the Netherlands&quot;</span>, </span>
<span id="cb15-28"><a href="5-relational-databases.html#cb15-28" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Searches of the word &#39;Dengue&#39; in the Netherlands&quot;</span>,</span>
<span id="cb15-29"><a href="5-relational-databases.html#cb15-29" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Year&quot;</span>,</span>
<span id="cb15-30"><a href="5-relational-databases.html#cb15-30" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Searches&quot;</span></span>
<span id="cb15-31"><a href="5-relational-databases.html#cb15-31" aria-hidden="true" tabindex="-1"></a>       )</span>
<span id="cb15-32"><a href="5-relational-databases.html#cb15-32" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(flu_region, dengue_region, <span class="at">nrow =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/data%20visualisation%202-1.png" width="672" />
<br>
The flu had its most occurrences in 2009 and 2013 and its least in 2004 and 2010. There is no flu data for 2002 and 2003. This could be because of a lack of data in these years. <br>
The data shows that Dengue has had no occurrences in the Netherlands between 2002 and 2015.
<br> <br>
The third and last graph will show the worldwide occurrences of flu and dengue on a year to year basis. Showing what years these diseases were most common.
<br></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="5-relational-databases.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot occurrences of flu and dengue per year</span></span>
<span id="cb16-2"><a href="5-relational-databases.html#cb16-2" aria-hidden="true" tabindex="-1"></a>flu_region <span class="ot">&lt;-</span> gap_flu_dengue_data <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb16-3"><a href="5-relational-databases.html#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, </span>
<span id="cb16-4"><a href="5-relational-databases.html#cb16-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">y =</span> searches_flu,</span>
<span id="cb16-5"><a href="5-relational-databases.html#cb16-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill =</span> year)</span>
<span id="cb16-6"><a href="5-relational-databases.html#cb16-6" aria-hidden="true" tabindex="-1"></a>           ) <span class="sc">+</span></span>
<span id="cb16-7"><a href="5-relational-databases.html#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb16-8"><a href="5-relational-databases.html#cb16-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb16-9"><a href="5-relational-databases.html#cb16-9" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">+</span> </span>
<span id="cb16-10"><a href="5-relational-databases.html#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Flu searches per year&quot;</span>, </span>
<span id="cb16-11"><a href="5-relational-databases.html#cb16-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Worldwide searches of the word &#39;Flu&#39;&quot;</span>,</span>
<span id="cb16-12"><a href="5-relational-databases.html#cb16-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Year&quot;</span>,</span>
<span id="cb16-13"><a href="5-relational-databases.html#cb16-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Searches&quot;</span></span>
<span id="cb16-14"><a href="5-relational-databases.html#cb16-14" aria-hidden="true" tabindex="-1"></a>       )</span>
<span id="cb16-15"><a href="5-relational-databases.html#cb16-15" aria-hidden="true" tabindex="-1"></a>dengue_region <span class="ot">&lt;-</span> gap_flu_dengue_data <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb16-16"><a href="5-relational-databases.html#cb16-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, </span>
<span id="cb16-17"><a href="5-relational-databases.html#cb16-17" aria-hidden="true" tabindex="-1"></a>               <span class="at">y =</span> searches_dengue,</span>
<span id="cb16-18"><a href="5-relational-databases.html#cb16-18" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill =</span> year)</span>
<span id="cb16-19"><a href="5-relational-databases.html#cb16-19" aria-hidden="true" tabindex="-1"></a>           ) <span class="sc">+</span></span>
<span id="cb16-20"><a href="5-relational-databases.html#cb16-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb16-21"><a href="5-relational-databases.html#cb16-21" aria-hidden="true" tabindex="-1"></a>          <span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span></span>
<span id="cb16-22"><a href="5-relational-databases.html#cb16-22" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">+</span> </span>
<span id="cb16-23"><a href="5-relational-databases.html#cb16-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Dengue searches per year&quot;</span>, </span>
<span id="cb16-24"><a href="5-relational-databases.html#cb16-24" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Worldwide searches of the word &#39;Dengue&#39;&quot;</span>,</span>
<span id="cb16-25"><a href="5-relational-databases.html#cb16-25" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Year&quot;</span>,</span>
<span id="cb16-26"><a href="5-relational-databases.html#cb16-26" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Searches&quot;</span></span>
<span id="cb16-27"><a href="5-relational-databases.html#cb16-27" aria-hidden="true" tabindex="-1"></a>       )</span>
<span id="cb16-28"><a href="5-relational-databases.html#cb16-28" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(flu_region, dengue_region, <span class="at">nrow =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/data%20visualisation%203-1.png" width="672" />
<br>
The Flu had its most occurrences in 2009, same as in the Netherlands as shown in the previous graph. The least occurrences were in 2002, 2003 and 2004. This could be because of a lack of data in these years. The rest of the datapoints show only minor peaks. <br>
Dengue had its most occurrences in 2009 and 2010, and the least in 2002, 2003 and 2015. This could also be because of a lack of data in the first, and last few years of the survey.</p>

</div>
<p style="text-align: center;">
<a href="4-looking-ahead.html"><button class="btn btn-default">Previous</button></a>
<a href="6-introduction.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>
